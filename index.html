<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HDSBâ€¯WellConnect</title>
    <!-- Tailwind â†’ CDN for rapid prototyping -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: "Inter", sans-serif;
        }
        /* Chat bubbles */
        .chat-bubble-user {
            @apply bg-blue-600 text-white rounded-2xl rounded-br-sm;
        }
        .chat-bubble-ai {
            @apply bg-gray-200 text-gray-800 rounded-2xl rounded-bl-sm dark:bg-gray-700 dark:text-gray-100;
        }
        /* Mood emoji button */
        .mood-btn {
            @apply text-4xl transition-transform hover:scale-110 cursor-pointer select-none;
        }
    </style>
</head>
<body class="bg-sky-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100">
    <!-- Quickâ€‘exit (topâ€‘left) -->
    <button id="quick-exit" title="Quick Exit" class="fixed left-4 top-4 z-50 bg-red-600/90 text-white px-3 py-1.5 rounded-full text-sm hover:bg-red-700 focus:outline-none shadow-lg backdrop-blur">
        Leave Page â–¸
    </button>

    <!-- Header -->
    <header class="sticky top-0 z-40 bg-white/60 dark:bg-gray-800/60 backdrop-blur shadow-sm">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <a href="#home" class="text-2xl font-bold text-blue-600 dark:text-blue-400">HDSBâ€¯WellConnect</a>
            <nav class="hidden md:flex space-x-6 text-sm font-medium">
                <a href="#home" class="hover:text-blue-600">Home</a>
                <a href="#mood" class="hover:text-blue-600">Mood Checkâ€‘in</a>
                <a href="#chatbot" class="hover:text-blue-600">Chat</a>
                <a href="#resources" class="hover:text-blue-600">Resources</a>
                <a href="#faq" class="hover:text-blue-600">FAQ</a>
                <a href="#contact" class="hover:text-red-600">Crisis</a>
            </nav>
            <div class="flex items-center space-x-4">
                <!-- Darkâ€‘mode toggle -->
                <button id="theme-toggle" aria-label="Theme toggle" class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <svg id="theme-icon" class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364 6.364l-1.414-1.414m0-9.9 1.414-1.414M6.343 17.657l1.414-1.414M6.343 6.343 4.929 4.929" />
                    </svg>
                </button>
                <!-- Mobile menu button -->
                <button id="mobile-button" class="md:hidden">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
            </div>
        </div>
        <!-- Mobile links -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 px-6 pb-4 space-y-2">
            <a href="#home" class="block">Home</a>
            <a href="#mood" class="block">Mood Checkâ€‘in</a>
            <a href="#chatbot" class="block">Chat</a>
            <a href="#resources" class="block">Resources</a>
            <a href="#faq" class="block">FAQ</a>
            <a href="#contact" class="block text-red-600">Crisis</a>
        </div>
    </header>

    <main>
        <!-- Hero -->
        <section id="home" class="relative overflow-hidden">
            <div class="absolute inset-0 -z-10 bg-gradient-to-br from-sky-200 via-indigo-200 to-rose-100 dark:from-blue-900 dark:via-indigo-900 dark:to-purple-900"></div>
            <svg class="absolute top-0 left-0 w-full" viewBox="0 0 1440 160" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 128L60 112C120 96 240 64 360 69.3C480 75 600 117 720 138.7C840 160 960 160 1080 149.3C1200 139 1320 117 1380 106.7L1440 96V0H1380C1320 0 1200 0 1080 0C960 0 840 0 720 0C600 0 480 0 360 0C240 0 120 0 60 0H0V128Z" fill="white" fill-opacity="0.6"/></svg>
            <div class="container mx-auto px-6 pt-32 pb-24 text-center flex flex-col items-center">
                <h1 class="text-4xl md:text-5xl font-extrabold mb-4 drop-shadow-lg">A Safeâ€¯Space for Every HDSB Student</h1>
                <p class="max-w-2xl text-lg md:text-xl text-gray-700 dark:text-gray-200">Whether you need someone to listen, helpful resources, or just a moment of calm, WellConnect is hereÂ 24/7.</p>
                <div class="mt-8 flex gap-4 flex-wrap justify-center">
                    <a href="#chatbot" class="bg-blue-600 text-white font-semibold px-8 py-3 rounded-full shadow hover:scale-105 transition-transform">Start Chatting</a>
                    <a href="#resources" class="bg-white/80 backdrop-blur text-blue-600 font-semibold px-8 py-3 rounded-full shadow hover:bg-white/90">Browse Resources</a>
                </div>
            </div>
        </section>

        <!-- Mood tracker -->
        <section id="mood" class="py-20 bg-white dark:bg-gray-900">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-6">How are you feeling today?</h2>
                <p class="mb-8 text-gray-600 dark:text-gray-300">Tap the emoji that matches your current mood to see quick suggestions.</p>
                <div class="flex justify-center gap-6 text-5xl">
                    <span class="mood-btn" data-mood="Happy">ðŸ˜Š</span>
                    <span class="mood-btn" data-mood="Stressed">ðŸ˜°</span>
                    <span class="mood-btn" data-mood="Sad">ðŸ˜¢</span>
                    <span class="mood-btn" data-mood="Angry">ðŸ˜¡</span>
                    <span class="mood-btn" data-mood="Tired">ðŸ˜´</span>
                </div>
                <div id="mood-suggestion" class="mt-10 text-lg font-medium"></div>
            </div>
        </section>

        <!-- Chatbot -->
        <section id="chatbot" class="py-20 bg-sky-50 dark:bg-gray-800">
            <div class="container mx-auto px-6">
                <div class="max-w-3xl mx-auto bg-white dark:bg-gray-700 rounded-3xl shadow-lg">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-600 flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold">WellConnect Assistant</h2>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">Powered by Gemini Flash Â· Private & anonymous</p>
                        </div>
                        <span class="relative flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </span>
                    </div>
                    <div id="chat-window" class="p-6 h-96 overflow-y-auto space-y-4 bg-gradient-to-b from-white/60 via-white/80 to-white dark:from-gray-700 dark:via-gray-700/80 dark:to-gray-700">
                        <div class="flex justify-start">
                            <div class="chat-bubble-ai p-4 max-w-md">
                                <p>Hey, I'm here to listen. What's on your mind today?</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 bg-gray-100 dark:bg-gray-600 rounded-b-3xl">
                        <div class="flex">
                            <input id="chat-input" type="text" placeholder="Type your message..." class="flex-grow px-4 py-2 rounded-l-full focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-500 dark:placeholder-gray-300" />
                            <button id="chat-send-button" class="bg-blue-600 text-white px-6 py-2 rounded-r-full hover:bg-blue-700">Send</button>
                        </div>
                        <p id="loading-indicator" class="mt-2 text-sm text-gray-500 hidden">Assistant is typing...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resources with tabs -->
        <section id="resources" class="py-20 bg-gray-100 dark:bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-10">Resource Library</h2>
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button class="tab-btn bg-blue-600 text-white px-4 py-2 rounded-full shadow" data-tab="crisis">Crisis & 24/7</button>
                    <button class="tab-btn bg-blue-100 dark:bg-gray-700 px-4 py-2 rounded-full" data-tab="school">Inâ€‘School</button>
                    <button class="tab-btn bg-blue-100 dark:bg-gray-700 px-4 py-2 rounded-full" data-tab="provincial">Ontario & Canada</button>
                    <button class="tab-btn bg-blue-100 dark:bg-gray-700 px-4 py-2 rounded-full" data-tab="selfhelp">Selfâ€‘Help Tools</button>
                </div>

                <div id="tab-crisis" class="tab-panel grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Crisis cards -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold text-red-600">Emergency (911)</h3>
                        <p class="mt-2 text-gray-600 dark:text-gray-300">If you or someone is in immediate danger.</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold text-red-600">9â€‘8â€‘8 Suicide Crisis Helpline</h3>
                        <p class="mt-2">Call or text 9â€‘8â€‘8 Â· 24/7 across Canada.</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">ROCK Crisis Line (Halton)</h3>
                        <p class="mt-2">905â€‘878â€‘9785 Â· Youth underâ€¯18.</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">Kids Help Phone</h3>
                        <p class="mt-2">1â€‘800â€‘668â€‘6868 or text CONNECT to 686868.</p>
                    </div>
                </div>

                <!-- School resources -->
                <div id="tab-school" class="tab-panel hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">Guidanceâ€¯Counsellor</h3>
                        <p class="mt-2">Visit your main office or the "StudentÂ Services" page of your school website.</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">School Social Worker</h3>
                        <p class="mt-2">Ask your guidance counsellor for a referral.</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">HDSB Mental Health Strategy</h3>
                        <a href="https://www.hdsb.ca/our-board/Pages/mental-health-well-being.aspx" target="_blank" class="mt-2 inline-block text-blue-600 dark:text-blue-400 hover:underline">View Plan</a>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow md:col-span-2 lg:col-span-1 flex flex-col justify-between">
                        <h3 class="text-xl font-semibold">School Mental Health Champions</h3>
                        <p class="mt-2 flex-grow">Each secondary school has students trained to promote wellâ€‘being initiatives. Ask your guidance office how to get involved.</p>
                    </div>
                </div>

                <!-- Provincial -->
                <div id="tab-provincial" class="tab-panel hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">CAMHâ€¯Youth Wellness</h3>
                        <a href="https://www.camh.ca/en/health-info/youth-wellness" target="_blank" class="mt-2 inline-block text-blue-600 dark:text-blue-400 hover:underline">camh.ca</a>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">School Mental Health Ontario</h3>
                        <a href="https://smho-smso.ca/" target="_blank" class="mt-2 inline-block text-blue-600 dark:text-blue-400 hover:underline">smhoâ€‘smso.ca</a>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">Good2Talk (Postâ€‘secondary)</h3>
                        <p class="mt-2">1â€‘866â€‘925â€‘5454 Â· 24/7</p>
                    </div>
                </div>

                <!-- Selfâ€‘help -->
                <div id="tab-selfhelp" class="tab-panel hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">Mindfulness Breathing Timer</h3>
                        <button id="breath-btn" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-full">Start 1â€‘min Calm</button>
                        <p id="breath-display" class="mt-2 text-lg font-medium"></p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow">
                        <h3 class="text-xl font-semibold">Journal Prompt Generator</h3>
                        <button id="prompt-btn" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-full">New Prompt</button>
                        <p id="prompt-display" class="mt-2 italic"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section id="faq" class="py-20 bg-white dark:bg-gray-900">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-10">Frequently Asked Questions</h2>
                <div class="max-w-3xl mx-auto space-y-6">
                    <details class="p-4 border rounded-lg dark:border-gray-600">
                        <summary class="font-semibold cursor-pointer">Is WellConnect confidential?</summary>
                        <p class="mt-2">Yes. Your chat is private and not stored by HDSB. For urgent safety concerns, always call 9â€‘8â€‘8 or 911.</p>
                    </details>
                    <details class="p-4 border rounded-lg dark:border-gray-600">
                        <summary class="font-semibold cursor-pointer">Can this replace therapy?</summary>
                        <p class="mt-2">No. WellConnect offers guidance and resources but is not a substitute for professional counselling.</p>
                    </details>
                </div>
            </div>
        </section>

        <!-- Crisis Contact -->
        <section id="contact" class="py-20 bg-red-50 dark:bg-red-900/40">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold text-red-700 dark:text-red-400 mb-4">Need Immediate Help?</h2>
                <p class="text-lg max-w-3xl mx-auto mb-8">Call 9â€‘8â€‘8 Â· If you or someone you know is in crisis or feeling unsafe, reach out right now. You matter.</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="tel:988" class="bg-red-600 text-white font-semibold px-8 py-4 rounded-full hover:bg-red-700 transition-transform hover:scale-105">Call / Text 9â€‘8â€‘8</a>
                    <a href="tel:905-878-9785" class="bg-red-600 text-white font-semibold px-8 py-4 rounded-full hover:bg-red-700 transition-transform hover:scale-105">Halton Crisis Line</a>
                    <a href="https://www.kidshelpphone.ca" target="_blank" class="bg-gray-800 text-white font-semibold px-8 py-4 rounded-full hover:bg-gray-900 transition-transform hover:scale-105">Kids Help Phone</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-200">
        <div class="container mx-auto px-6 py-8 text-center space-y-2 text-sm">
            <p>Â©Â 2025 WellConnect Â· Studentâ€‘led mentalâ€‘health initiative</p>
            <p class="text-gray-400">Not an official HDSB website. For emergencies, dialÂ 911.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        /* ------------ Theme ------------- */
        const htmlEl = document.documentElement;
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        if (localStorage.theme === 'dark') htmlEl.classList.add('dark');
        themeToggle.addEventListener('click', () => {
            htmlEl.classList.toggle('dark');
            localStorage.theme = htmlEl.classList.contains('dark') ? 'dark' : 'light';
            themeIcon.classList.toggle('rotate-180');
        });

        /* -------- Mobile nav ---------- */
        const mobileBtn = document.getElementById('mobile-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

        /* ---------- Quick exit -------- */
        document.getElementById('quick-exit').addEventListener('click', () => {
            window.location.href = 'https://www.google.com';
        });

        /* -------- Mood tracker -------- */
        const moodMap = {
            Happy: 'Keep shining! Consider sharing your positivity with a friend who might need it.',
            Stressed: 'Try a 1â€‘minute breathing exercise below or chat with our assistant.',
            Sad: 'It might help to reach out to Kids Help Phone (text CONNECT to 686868).',
            Angry: 'Take a short walk or listen to calming music. You could also chat with ROCK at 905â€‘878â€‘9785.',
            Tired: 'Hydrate, stretch, and if possible, allow yourself a short rest.'
        };
        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const mood = btn.dataset.mood;
                document.getElementById('mood-suggestion').textContent = moodMap[mood];
            });
        });

        /* -------- Tabs logic -------- */
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const target = btn.dataset.tab;
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.replace('bg-blue-600', 'bg-blue-100'));
                btn.classList.replace('bg-blue-100', 'bg-blue-600');
                document.querySelectorAll('.tab-panel').forEach(p => p.classList.add('hidden'));
                document.getElementById('tab-' + target).classList.remove('hidden');
            });
        });

        /* ---- Selfâ€‘help: breathing ---- */
        const breathBtn = document.getElementById('breath-btn');
        const breathDisplay = document.getElementById('breath-display');
        let breathInterval;
        breathBtn?.addEventListener('click', () => {
            if (breathInterval) return; // already running
            breathDisplay.textContent = 'Breath In';
            let cycle = 0;
            breathInterval = setInterval(() => {
                cycle++;
                breathDisplay.textContent = cycle % 2 ? 'Holdâ€¦' : (cycle % 4 ? 'Breath Outâ€¦' : 'Breath Inâ€¦');
                if (cycle === 15) { // roughly 1 min
                    clearInterval(breathInterval);
                    breathInterval = null;
                    breathDisplay.textContent = 'Great job!';
                }
            }, 4000);
        });

        /* ---- Journal prompt --------- */
        const prompts = [
            'Write three things youâ€™re grateful for today.',
            'Describe a place where you feel safe.',
            'Whatâ€™s one small victory you had this week?',
            'Name someone who supports you and why you appreciate them.',
            'What does selfâ€‘care mean to you today?'
        ];
        const promptBtn = document.getElementById('prompt-btn');
        const promptDisplay = document.getElementById('prompt-display');
        promptBtn?.addEventListener('click', () => {
            const idx = Math.floor(Math.random() * prompts.length);
            promptDisplay.textContent = prompts[idx];
        });

        /* -------- Chatbot ------------- */
        const chatWindow = document.getElementById('chat-window');
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('chat-send-button');
        const loadingIndicator = document.getElementById('loading-indicator');

        const chatHistory = [
            {
                role: 'user',
                parts: [{ text: `You are HDSBWellConnect, a warm and understanding guide for students in the Halton District School Board (HDSB). Your voice is like a caring teacher or mentorâ€”calm, supportive, and genuine. Keep your messages concise, resonant, and short, like a real text conversation.

Core Instructions:
1. **Persona:** Empathetic, patient, and nonâ€‘judgmental. You are a starting point for help. Don't over push reasources that seem extreme, make sure to resonate and support the user first, then tailor support connections and reasources for the specific user's needs and wants.
2. **Primary Goal:** Listen to the student's concerns and gently guide them to the right resources.
3. **Resource Knowledge:**
   â€¢ **Inâ€‘School Support:** Visit your school's main office or Student Services page to connect with guidance. Social workers are available through guidance.
   â€¢ **Immediate Crisis:** If a student mentions selfâ€‘harm or feeling unsafe, strongly recommend 9â€‘8â€‘8 or 911.
   â€¢ **Halton Crisis:** For youth under 18, ROCK CrisisÂ Line 905â€‘878â€‘9785.
   â€¢ **General Support:** Kids Help Phone 1â€‘800â€‘668â€‘6868 or text CONNECT to 686868.
4. **Guidance, Not Therapy:** Encourage professional help; avoid direct advice.
5. **Boundaries:** If asked outside mental health, steer back, e.g., "I'm here to focus on you and your wellâ€‘being. How are you feeling?"` }]
            },
            { role: 'model', parts: [{ text: 'Understood. I will respond warmly and connect students with the best resource for them.' }] }
        ];

        async function getAiResponse() {
            loadingIndicator.classList.remove('hidden');
            sendButton.disabled = true;
            chatInput.disabled = true;
            const payload = { contents: chatHistory.slice(-12) };
            try {
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDMbMxoJELSuRgps57WT8D7PdXRgWcR7dI', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || 'Sorry, something went wrong.';
                addMessage(text, 'ai');
                chatHistory.push({ role: 'model', parts: [{ text }] });
            } catch (err) {
                addMessage('I couldn\'t connect right now. Please try again later.', 'ai');
            }
            loadingIndicator.classList.add('hidden');
            sendButton.disabled = false;
            chatInput.disabled = false;
            chatInput.focus();
        }
        function addMessage(msg, sender) {
            const wrapper = document.createElement('div');
            wrapper.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            const bubble = document.createElement('div');
            bubble.innerHTML = msg.replace(/\n/g, '<br/>');
            bubble.className = `${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'} p-4 max-w-md`;
            wrapper.appendChild(bubble);
            chatWindow.appendChild(wrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        function handleSend() {
            const text = chatInput.value.trim();
            if (!text) return;
            addMessage(text, 'user');
            chatHistory.push({ role: 'user', parts: [{ text }] });
            chatInput.value = '';
            getAiResponse();
        }
        sendButton.addEventListener('click', handleSend);
        chatInput.addEventListener('keypress', e => e.key === 'Enter' && handleSend());
    </script>
</body>
</html>
